<?xml version="1.0"?>
  <database name="TRIGGER NO_UNICO_QUINCENA_TRG">
    <trigger name="NO_UNICO_QUINCENA_TRG" table="NO_REGISTRA_QUINCENA" fires="before" insert="true" update="true" delete="false" foreach="row">
      <body><![CDATA[
v_mensaje 	varchar(255);	  
BEGIN
    
    IF (UPDATING OR INSERTING) THEN
        IF (SELECT count(*) > 0 from 
			no_registra_quincena 
			where 
			c_period_id = :NEW.c_period_id
			and ad_org_id = :NEW.ad_org_id
			) THEN
		v_mensaje:='@NO_UNICO_QUINCENA_EXCEPTION@';

 
		raise exception '%', '@NO_UNICO_QUINCENA_EXCEPTION@';

        ELSE
            RETURN NEW;
        END IF;
    END IF;

    IF DELETING THEN 
        RETURN OLD; 
    ELSE 
        RETURN NEW; 
    END IF; 

END NO_UNICO_QUINCENA_TRG
]]></body>
    </trigger>
  </database>
