<?xml version="1.0"?>
  <database name="VIEW IMP_REPORTE_FACTURAS_V">
    <view name="IMP_REPORTE_FACTURAS_V"><![CDATA[SELECT i.c_invoice_id AS imp_reporte_facturas_v_id, cc.ad_client_id, cc.ad_org_id, cc.isactive, cc.created, cc.createdby, cc.updated, cc.updatedby, cc.value AS codimportacion, cc.name AS importacion, cc.description AS descripcionimp, i.documentno AS factura, i.dateinvoiced AS fecha, (SELECT c_bpartner.name FROM c_bpartner WHERE c_bpartner.c_bpartner_id = i.c_bpartner_id) AS tercero, COALESCE(i.description, '') AS descripcion, CASE WHEN (((SELECT c_doctype.docbasetype FROM c_doctype WHERE c_doctype.c_doctype_id = i.c_doctypetarget_id))) = 'APC' THEN i.grandtotal * (-1) ELSE i.grandtotal END AS totalfactura, rc.porcentaje AS porcentajeimp, round(i.grandtotal * (rc.porcentaje * 0.01), 2) AS valorimportacion, rc.em_imp_esfacturaimp AS factcompra, COALESCE(rc.detalle, '') AS detalle, (SELECT sum(cco_registra_costos.valor) AS sum FROM cco_registra_costos WHERE cco_registra_costos.cco_cuenta_costos_id = cc.cco_cuenta_costos_id AND cco_registra_costos.em_imp_esfacturaimp = 'Y') AS fob, (SELECT sum(cco_registra_costos.valor) AS sum FROM cco_registra_costos WHERE cco_registra_costos.cco_cuenta_costos_id = cc.cco_cuenta_costos_id AND cco_registra_costos.em_imp_esfacturaimp = 'N') AS gastos FROM cco_cuenta_costos cc, cco_registra_costos rc, c_invoice i WHERE cc.cco_cuenta_costos_id = rc.cco_cuenta_costos_id AND rc.c_invoice_id = i.c_invoice_id AND cc.isactive = 'Y' AND rc.isactive = 'Y' AND i.isactive = 'Y' ORDER BY cc.cco_cuenta_costos_id, rc.em_imp_esfacturaimp DESC]]></view>
  </database>
