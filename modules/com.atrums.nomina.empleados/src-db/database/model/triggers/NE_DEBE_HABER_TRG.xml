<?xml version="1.0"?>
  <database name="TRIGGER NE_DEBE_HABER_TRG">
    <trigger name="NE_DEBE_HABER_TRG" table="NE_PERFIL_RUBRO_LINE" fires="before" insert="true" update="true" delete="false" foreach="row">
      <body><![CDATA[
	V_DEBE character varying(32);
	
	V_HABER character varying(32);
	
BEGIN	
	IF  INSERTING OR UPDATING   THEN 

		SELECT N_DEBE_ACCT , N_HABER_ACCT 
		INTO V_DEBE, V_HABER
		FROM NO_TIPO_ING_EGR_ACCT 
		WHERE NO_TIPO_INGRESO_EGRESO_ID = :new.NO_TIPO_INGRESO_EGRESO_ID;
		
		IF V_DEBE IS NULL AND V_HABER IS NULL  AND  :new.ne_debe_acct is null and :new.ne_haber_acct is null then
			raise '%', '@NE_RUB_LIN_DEB_HAB_VAL@';
		ELSE
			:NEW.ne_debe_acct = V_DEBE;
			:NEW.ne_haber_acct =V_HABER; 
		
		END IF;
	END IF;
	

	if :new.ne_debe_acct is null and :new.ne_haber_acct is null then
	
		raise '%', '@NE_RUB_LIN_DEB_HAB_VAL@';
	end if;
	
	return new;
END NE_DEBE_HABER_TRG
]]></body>
    </trigger>
  </database>
